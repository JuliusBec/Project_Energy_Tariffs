INFO:     Started server process [30634]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     84.167.138.50:0 - "GET / HTTP/1.1" 200 OK
INFO:src.Webscraping.scraper_tibber:üîç Starte Tibber-Scraping f√ºr PLZ 71065, 3500.0 kWh/Jahr
INFO:src.Webscraping.scraper_tibber:üì° Sende Request an: https://tibber.com/de/preisrechner?postalCode=71065&averageConsumption=3500.0
INFO:src.Webscraping.scraper_tibber:‚úÖ __NEXT_DATA__ erfolgreich geparst
INFO:src.Webscraping.scraper_tibber:‚ÑπÔ∏è  Preise werden clientseitig nachgeladen (GraphQL API)
INFO:src.Webscraping.scraper_tibber:‚ÑπÔ∏è  Verwende PLZ-basierte Sch√§tzungen als Fallback
WARNING:src.Webscraping.scraper_tibber:‚ö†Ô∏è Real-Scraping nicht m√∂glich, verwende PLZ-Sch√§tzungen
INFO:src.Webscraping.scraper_tibber:üìä Generiere PLZ-basierte Sch√§tzungen f√ºr 71065
INFO:src.Webscraping.scraper_tibber:   PLZ-Pr√§fix: 71
INFO:src.Webscraping.scraper_tibber:   Netznutzung: 9.9 ‚Ç¨/Mon
INFO:src.Webscraping.scraper_tibber:   √ò kWh-Preis: 29.32 ct/kWh
INFO:src.Webscraping.scraper_tibber:   Monatlich: 101.41 ‚Ç¨
INFO:     127.0.0.1:44248 - "POST /api/scrape/tariffs HTTP/1.1" 200 OK
GET /api/tariffs called
Returning 6 tariffs
INFO:     84.167.138.50:0 - "GET /api/tariffs HTTP/1.1" 200 OK
Sliced 30 days of data: 1440 rows, total consumption: 227.24 kWh
Total consumption: 227.2354426356074 kWh
Total consumption cost: 61.13482684360002‚Ç¨
Average kWh price: 0.2877‚Ç¨/kWh
Base price: 14.9‚Ç¨
Total cost: 76.03482684360002‚Ç¨
INFO:     84.167.138.50:0 - "POST /api/calculate HTTP/1.1" 200 OK
Sliced 30 days of data: 1440 rows, total consumption: 227.24 kWh
Total consumption: 227.2354426356074 kWh
Total consumption cost: 69.5645158740167‚Ç¨
Average kWh price: 0.3277‚Ç¨/kWh
Base price: 9.9‚Ç¨
Total cost: 79.46451587401671‚Ç¨
INFO:     84.167.138.50:0 - "POST /api/calculate HTTP/1.1" 200 OK

================================================================================
FixedTariff.calculate_cost() called for tariff: EnBW mobility+ Zuhause
Data type: <class 'float'>
Numeric value (annual consumption): 2500.0
================================================================================

Sliced 30 days of data: 1440 rows, total consumption: 227.24 kWh
INFO:     84.167.138.50:0 - "POST /api/calculate HTTP/1.1" 200 OK

================================================================================
FixedTariff.calculate_cost() called for tariff: EnBW easy+
Data type: <class 'float'>
Numeric value (annual consumption): 2500.0
================================================================================

Sliced 30 days of data: 1440 rows, total consumption: 227.24 kWh
INFO:     84.167.138.50:0 - "POST /api/calculate HTTP/1.1" 200 OK

================================================================================
FixedTariff.calculate_cost() called for tariff: EnBW Basis
Data type: <class 'float'>
Numeric value (annual consumption): 2500.0
================================================================================

Sliced 30 days of data: 1440 rows, total consumption: 227.24 kWh
INFO:     84.167.138.50:0 - "POST /api/calculate HTTP/1.1" 200 OK

================================================================================
FixedTariff.calculate_cost() called for tariff: Komfort
Data type: <class 'float'>
Numeric value (annual consumption): 2500.0
================================================================================

Sliced 30 days of data: 1440 rows, total consumption: 227.24 kWh
INFO:     84.167.138.50:0 - "POST /api/calculate HTTP/1.1" 200 OK
INFO:     84.167.138.50:0 - "POST /api/predict-savings HTTP/1.1" 200 OK
INFO:     84.167.138.50:0 - "GET /api/forecast HTTP/1.1" 200 OK
INFO:src.Webscraping.scraper_tibber:üîç Starte Tibber-Scraping f√ºr PLZ 71065, 3500.0 kWh/Jahr
INFO:src.Webscraping.scraper_tibber:üì° Sende Request an: https://tibber.com/de/preisrechner?postalCode=71065&averageConsumption=3500.0
INFO:src.Webscraping.scraper_tibber:‚úÖ __NEXT_DATA__ erfolgreich geparst
INFO:src.Webscraping.scraper_tibber:‚ÑπÔ∏è  Preise werden clientseitig nachgeladen (GraphQL API)
INFO:src.Webscraping.scraper_tibber:‚ÑπÔ∏è  Verwende PLZ-basierte Sch√§tzungen als Fallback
WARNING:src.Webscraping.scraper_tibber:‚ö†Ô∏è Real-Scraping nicht m√∂glich, verwende PLZ-Sch√§tzungen
INFO:src.Webscraping.scraper_tibber:üìä Generiere PLZ-basierte Sch√§tzungen f√ºr 71065
INFO:src.Webscraping.scraper_tibber:   PLZ-Pr√§fix: 71
INFO:src.Webscraping.scraper_tibber:   Netznutzung: 9.9 ‚Ç¨/Mon
INFO:src.Webscraping.scraper_tibber:   √ò kWh-Preis: 29.32 ct/kWh
INFO:src.Webscraping.scraper_tibber:   Monatlich: 101.41 ‚Ç¨
INFO:     84.167.138.50:0 - "POST /api/scrape/tariffs HTTP/1.1" 200 OK
INFO:     84.167.138.50:0 - "POST /api/predict-savings HTTP/1.1" 200 OK
INFO:     84.167.138.50:0 - "GET /api/forecast HTTP/1.1" 200 OK
Error generating price chart data: cannot import name 'create_chart_data' from 'src.backend.forecasting.EnergyPriceForecast' (/workspaces/Project_Energy_Tariffs/src/backend/forecasting/EnergyPriceForecast.py)
INFO:     84.167.138.50:0 - "GET /api/price-chart-data HTTP/1.1" 500 Internal Server Error
Error generating price breakdown: cannot import name 'get_price_breakdown' from 'src.backend.forecasting.EnergyPriceForecast' (/workspaces/Project_Energy_Tariffs/src/backend/forecasting/EnergyPriceForecast.py)
INFO:     84.167.138.50:0 - "GET /api/price-breakdown HTTP/1.1" 500 Internal Server Error
Error generating price chart data: cannot import name 'create_chart_data' from 'src.backend.forecasting.EnergyPriceForecast' (/workspaces/Project_Energy_Tariffs/src/backend/forecasting/EnergyPriceForecast.py)
INFO:     84.167.138.50:0 - "GET /api/price-chart-data HTTP/1.1" 500 Internal Server Error
Error generating price breakdown: cannot import name 'get_price_breakdown' from 'src.backend.forecasting.EnergyPriceForecast' (/workspaces/Project_Energy_Tariffs/src/backend/forecasting/EnergyPriceForecast.py)
INFO:     84.167.138.50:0 - "GET /api/price-breakdown HTTP/1.1" 500 Internal Server Error
INFO:src.Webscraping.scraper_tibber:üîç Starte Tibber-Scraping f√ºr PLZ , 3500.0 kWh/Jahr
INFO:src.Webscraping.scraper_tibber:üì° Sende Request an: https://tibber.com/de/preisrechner?postalCode=&averageConsumption=3500.0
INFO:src.Webscraping.scraper_tibber:‚úÖ __NEXT_DATA__ erfolgreich geparst
INFO:src.Webscraping.scraper_tibber:‚ÑπÔ∏è  Preise werden clientseitig nachgeladen (GraphQL API)
INFO:src.Webscraping.scraper_tibber:‚ÑπÔ∏è  Verwende PLZ-basierte Sch√§tzungen als Fallback
WARNING:src.Webscraping.scraper_tibber:‚ö†Ô∏è Real-Scraping nicht m√∂glich, verwende PLZ-Sch√§tzungen
INFO:src.Webscraping.scraper_tibber:üìä Generiere PLZ-basierte Sch√§tzungen f√ºr 
INFO:src.Webscraping.scraper_tibber:   PLZ-Pr√§fix: 
INFO:src.Webscraping.scraper_tibber:   Netznutzung: 9.85 ‚Ç¨/Mon
INFO:src.Webscraping.scraper_tibber:   √ò kWh-Preis: 28.5 ct/kWh
INFO:src.Webscraping.scraper_tibber:   Monatlich: 98.97 ‚Ç¨
INFO:     84.167.138.50:0 - "POST /api/scrape/tariffs HTTP/1.1" 200 OK
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing

================================================================================
UPLOADED CSV FILE: user_data_53270.csv
Data shape: (35140, 3)
Date range: 2023-11-01 00:15:00 to 2024-11-01 00:00:00
Total consumption: 4350.95 kWh
Time span: 1.00 years
Extrapolated annual consumption: 4350.95 kWh
Average hourly consumption: 0.4953 kWh
First 5 rows:
             datetime  value status
0 2023-11-01 00:15:00  0.042      W
1 2023-11-01 00:30:00  0.022      W
2 2023-11-01 00:45:00  0.020      W
3 2023-11-01 01:00:00  0.016      W
4 2023-11-01 01:15:00  0.014      W
================================================================================

Created 6 tariffs
Processing tariff: EnBW mobility+ dynamic, is_dynamic: True
Prophet forecast: 720 hours (30.0 days) of future data
Forecast range: 2024-11-01 01:00:00 to 2024-12-01 00:00:00
Forecast total consumption: 333.12 kWh
Total consumption: 333.1233944591461 kWh
Total consumption cost: 100.72273309841313‚Ç¨
Average kWh price: 0.2850‚Ç¨/kWh
Base price: 14.9‚Ç¨
Total cost: 115.62273309841314‚Ç¨
Dynamic tariff - Cost: 115.62273309841314, Avg kWh price: 0.2850
Processing tariff: EnBW easy dynamic, is_dynamic: True
Prophet forecast: 720 hours (30.0 days) of future data
Forecast range: 2024-11-01 01:00:00 to 2024-12-01 00:00:00
Forecast total consumption: 333.12 kWh
Total consumption: 333.1233944591461 kWh
Total consumption cost: 114.04766887677897‚Ç¨
Average kWh price: 0.3250‚Ç¨/kWh
Base price: 9.9‚Ç¨
Total cost: 123.94766887677898‚Ç¨
Dynamic tariff - Cost: 123.94766887677898, Avg kWh price: 0.3250
Processing tariff: EnBW mobility+ Zuhause, is_dynamic: False

================================================================================
FixedTariff.calculate_cost() called for tariff: EnBW mobility+ Zuhause
Data type: <class 'pandas.core.frame.DataFrame'>
DataFrame shape: (35140, 3)
DataFrame columns: ['datetime', 'value', 'status']
DataFrame date range: 2023-11-01 00:15:00 to 2024-11-01 00:00:00
Total consumption in uploaded data: 17403.80 kWh
================================================================================

Converted 15-minute kW readings to kWh (multiplied by 0.25)
After resampling to hourly: 8785 rows, total: 4350.95 kWh
Prophet forecast: 720 hours (30.0 days) of future data
Forecast range: 2024-11-01 01:00:00 to 2024-12-01 00:00:00
Forecast total consumption: 316.10 kWh
Fixed tariff - Cost: 119.18125894671927, kWh rate: 0.3299
Processing tariff: EnBW easy+, is_dynamic: False

================================================================================
FixedTariff.calculate_cost() called for tariff: EnBW easy+
Data type: <class 'pandas.core.frame.DataFrame'>
DataFrame shape: (35140, 3)
DataFrame columns: ['datetime', 'value', 'status']
DataFrame date range: 2023-11-01 00:15:00 to 2024-11-01 00:00:00
Total consumption in uploaded data: 17403.80 kWh
================================================================================

Converted 15-minute kW readings to kWh (multiplied by 0.25)
After resampling to hourly: 8785 rows, total: 4350.95 kWh
Prophet forecast: 720 hours (30.0 days) of future data
Forecast range: 2024-11-01 01:00:00 to 2024-12-01 00:00:00
Forecast total consumption: 316.10 kWh
Fixed tariff - Cost: 120.5032510016886, kWh rate: 0.3499
Processing tariff: EnBW Basis, is_dynamic: False

================================================================================
FixedTariff.calculate_cost() called for tariff: EnBW Basis
Data type: <class 'pandas.core.frame.DataFrame'>
DataFrame shape: (35140, 3)
DataFrame columns: ['datetime', 'value', 'status']
DataFrame date range: 2023-11-01 00:15:00 to 2024-11-01 00:00:00
Total consumption in uploaded data: 17403.80 kWh
================================================================================

Converted 15-minute kW readings to kWh (multiplied by 0.25)
After resampling to hourly: 8785 rows, total: 4350.95 kWh
Prophet forecast: 720 hours (30.0 days) of future data
Forecast range: 2024-11-01 01:00:00 to 2024-12-01 00:00:00
Forecast total consumption: 316.10 kWh
Fixed tariff - Cost: 129.82524305665794, kWh rate: 0.3699
Processing tariff: Komfort, is_dynamic: False

================================================================================
FixedTariff.calculate_cost() called for tariff: Komfort
Data type: <class 'pandas.core.frame.DataFrame'>
DataFrame shape: (35140, 3)
DataFrame columns: ['datetime', 'value', 'status']
DataFrame date range: 2023-11-01 00:15:00 to 2024-11-01 00:00:00
Total consumption in uploaded data: 17403.80 kWh
================================================================================

Converted 15-minute kW readings to kWh (multiplied by 0.25)
After resampling to hourly: 8785 rows, total: 4350.95 kWh
Prophet forecast: 720 hours (30.0 days) of future data
Forecast range: 2024-11-01 01:00:00 to 2024-12-01 00:00:00
Forecast total consumption: 316.10 kWh
Fixed tariff - Cost: 129.66424702917325, kWh rate: 0.3599
Final results: 6 tariffs calculated
INFO:     84.167.138.50:0 - "POST /api/calculate-with-csv HTTP/1.1" 200 OK
INFO:src.Webscraping.scraper_tibber:üîç Starte Tibber-Scraping f√ºr PLZ , 4351.0 kWh/Jahr
INFO:src.Webscraping.scraper_tibber:üì° Sende Request an: https://tibber.com/de/preisrechner?postalCode=&averageConsumption=4351.0
INFO:src.Webscraping.scraper_tibber:‚úÖ __NEXT_DATA__ erfolgreich geparst
INFO:src.Webscraping.scraper_tibber:‚ÑπÔ∏è  Preise werden clientseitig nachgeladen (GraphQL API)
INFO:src.Webscraping.scraper_tibber:‚ÑπÔ∏è  Verwende PLZ-basierte Sch√§tzungen als Fallback
WARNING:src.Webscraping.scraper_tibber:‚ö†Ô∏è Real-Scraping nicht m√∂glich, verwende PLZ-Sch√§tzungen
INFO:src.Webscraping.scraper_tibber:üìä Generiere PLZ-basierte Sch√§tzungen f√ºr 
INFO:src.Webscraping.scraper_tibber:   PLZ-Pr√§fix: 
INFO:src.Webscraping.scraper_tibber:   Netznutzung: 9.85 ‚Ç¨/Mon
INFO:src.Webscraping.scraper_tibber:   √ò kWh-Preis: 28.5 ct/kWh
INFO:src.Webscraping.scraper_tibber:   Monatlich: 119.18 ‚Ç¨
INFO:     84.167.138.50:0 - "POST /api/scrape/tariffs HTTP/1.1" 200 OK
